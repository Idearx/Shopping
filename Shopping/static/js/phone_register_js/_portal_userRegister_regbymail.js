var isCurrentSite=!1,warningConfirmed=!1,countryRegions=[],showCountryRegions=[];function getCountryRegion(){var e={lang:localInfo.lang,reqClientType:localInfo.reqClientType};"true"!=localInfo.thirdLoginFlag&&"true"!=localInfo.isQuickReg||(e.thirdLoginFlag="true"),casAjaxObj.getCountryRegion(e,function(e){countryRegions=e.countryRegions,showCountryRegions=listToDropListCountry(countryRegions),localInfo.orderByLetterMap=e.orderByLetterMap},null,function(){},!1);var o;o=localInfo.currentCountrySiteID+"-"+localInfo.currentCountryCode;var n=localInfo.orderByLetterMap||showCountryRegions;$("#selectCountryImg").countrySearchDropList({items:n,defaultValue:o,onChange:function(e,o){var n=e.split("-");localInfo.currentCountrySiteID=n[0],localInfo.currentCountryCode=n[1];n[0];n[0]==localInfo.currentSiteID||warningConfirmed||(isCurrentSite=!1),localInfo.siteIDs=n[0],$("#selectedCountry").text(o),$("#regXCountry").text(rss_new.now_register_x_account.format(o));var r=e.split("-")[1];$("#selectCountryCodeDiv").html(""),getAgreementContent(r),afterSelectCountry(r),$("#countryRegion").val(e),displayAgreeTwoByCD(r)}})}function displayCountry(){var n=localInfo.currentCountryCode,r=getIPCountry(),t=getdefaultCountryByCurrentSiteID(),s=t.split("-")[1],a="";if(0<countryRegions.length){var i=!1;n&&$.each(countryRegions,function(e,o){if(n.toLowerCase()==o.regionID)return $("#selectedCountry").text(o.mulitLangRegion),$("#regXCountry").text(rss_new.now_register_x_account.format(o.mulitLangRegion)),i=!0,a=o.siteID+"-"+o.regionID,replaceAgreeAge(o.ageLimit),!1}),r&&!i&&$.each(countryRegions,function(e,o){if(r.toLowerCase()==o.regionID)return $("#selectedCountry").text(o.mulitLangRegion),$("#regXCountry").text(rss_new.now_register_x_account.format(o.mulitLangRegion)),i=!0,a=localInfo.currentSiteID+"-"+o.regionID,replaceAgreeAge(o.ageLimit),!1}),s&&!i&&$.each(countryRegions,function(e,o){if(s.toLowerCase()==o.regionID)return $("#selectedCountry").text(o.mulitLangRegion),$("#regXCountry").text(rss_new.now_register_x_account.format(o.mulitLangRegion)),i=!0,a=t,replaceAgreeAge(o.ageLimit),!1})}$("#countryRegion").val(a),1<=countryRegions.length&&($("#chooseCountry").css("display",""),$("#chooseCountryShadow").css("display",""))}function notCurrentSiteWarningDialog(){var e='<div style="line-height:1.5">'+rss_new.cross_register_tip+"</div>";$("<div/>").Dialog({title:rss_new.uc_common_hint,btnLeft:!1,btnRight:{text:rss_new.uc_common_igetit,fn:function(){warningConfirmed=!0,checkInputLegality()&&(registerAgreement(submitFun),this.hide())}},html:e,dialogStyle:localInfo.msgDialogStyle,beforeAction:function(){}}).Dialog("show")}function sendEmailCode(e){var t=$("#getValiCode");if(0<$("#randomCode").length&&!validator($("#randomCode"),!0))return!1;var o,n=$("#countryRegion").val();n&&(o=n.split("-")[1]);var r={email:e,accountType:"1",emailReqType:"3",languageCode:localInfo.lang,siteID:localInfo.currentCountrySiteID,reqClientType:localInfo.reqClientType,countryCode:o,operType:14,session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};"1"==localInfo.displayCaptchaType?r.randomCode=ramdonCodeImgObj.getRandomCode():r.randomCode=$("#randomCode").val(),rss_new.msgDialogOverlayClass&&rss_new.msgDialogOverlayClass,t.attr("disabled",!0),casAjaxObj.getEMailAuthCode(r,function s(){var e="-"+(.5*parseInt($("#msg_phoneRandomCode").width())-120+143)+"px";hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode")),showMsgSuccess({obj:$("#msg_getPhoneRandomCode"),msg:rss_new.uc_common_email_has_sendto.format(r.email),leftPix:e,rightPix:"-255px",bottom:"63px"}),$("#authCode").removeClass("chkAuthCodeSuccess"),$("#authCode").val(""),$("#authCode").removeAttr("disabled"),$("#emailAuthCodeRight").removeClass("poptips-yes"),t.attr("IntervalTime",60),t.attr("disabled",!0),t.addClass("auth_code_grey"),jsInnerTimeout($("#getValiCode"),rss_new.uc_common_resend,!0,!0)},function a(e,o){t.removeAttr("disabled",!0);var n=o.errorCode;"10000201"==n?"1"==localInfo.displayCaptchaType&&captchaObj?(showCaptchaError(),ramdonCodeImgObj.resetRandomCode()):(showRandomCodeError(e),chgRandomCodeForReset()):"10000507"==n?function r(e){$("<div/>").Dialog({btnRight:{text:rss_new.common_login,fn:function(){gotoUrl(localInfo.loginUrl+localInfo.urlQurey)}},btnLeft:{text:rss_new.box_js_cancel,fn:function(){}},html:'<div class="center" style="margin:36px 0;">'+e+"</div>"}).Dialog("show")}(e):showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e)})}function turnBtnToEnabled(e){e.attr("disabled",!1),e.attr("IntervalTime")<=0&&e.removeClass("auth_code_grey")}function checkImgAuthCode(){var n=$("#randomCode"),r=$("#randomCodeImg");$("#randomCode_msg");if("undefined"!=typeof n[0]&&4<=n.val().length){var e={randomCode:n.val(),session_code_key:"p_reg_login_websso_session_ramdom_code_key",randomCodeDisplayType:localInfo.randomCodeDisplayType};casAjaxObj.authCodeValidate(e,function(e){$("#authCodeRight").addClass("poptips-yes"),hideRandomCodeError(),validateInput()},function(e,o){chgRandomCode(r[0],localInfo.webssoLoginSessionCode),n[0].value="",$("#authCodeRight").removeClass("poptips-yes"),validateInput(),showRandomCodeError(e)})}else"undefined"!=typeof n[0]&&n.val().length}function showRandomCodeError(e){$("#randomCode_msg").html(e),$("#randomCode_msg").addClass("error-tips-EMUI5"),$("#randomCodeDiv").addClass("input-error-EMUI5")}function hideRandomCodeError(){$("#randomCode_msg").html(""),$("#randomCode_msg").removeClass("error-tips-EMUI5"),$("#randomCodeDiv").removeClass("input-error-EMUI5")}function checkInputLegality(){if($("#secPhoneAcct")!=undefined&&$("#secPhoneAcct").val()!=undefined&&""==$("#secPhoneAcct").val().trim()&&(hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone")),hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))),-1==$("#btnSubmit").attr("class").indexOf("sel")||$("#btnSubmit").hasClass("send-ajax"))return!1;var e=!1;if($(".error-tips-EMUI5").each(function(){1<$(this).text().trim().length&&(e=!0)}),e)return!1;var o=$("#registerForm");if(!validator(o,!0))return!1;if("true"==localInfo.isRegNeedInputAge&&!checkBirthday(!1))return!1;var n=$("#registerForm input[name='formBean.secphone']").val(),r=$("#registerForm input[name='formBean.secphoneauthCode']").val(),t=$("#countryCode").val();if(-1<t.indexOf("+")&&(t=t.replace("+","00")),"true"==localInfo.mustBindPhone){if(""==n)return showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_emptyphone),!1;if(!valiMobile(n,t))return showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error),!1;if(""==r)return showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss_new.forgetbyphone_inputsmscode),!1;if(!$("#authCode").hasClass("chkAuthCodeSuccess")||!$("#secAuthCode").hasClass("chkAuthCodeSuccess"))return!1}else if(n){if(!valiMobile(n,t))return showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error),!1;if(""==r)return showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss_new.forgetbyphone_inputsmscode),!1;if(!$("#authCode").hasClass("chkAuthCodeSuccess")||!$("#secAuthCode").hasClass("chkAuthCodeSuccess"))return!1}if(localInfo.currentCountrySiteID==localInfo.currentSiteID||warningConfirmed)return!0;notCurrentSiteWarningDialog()}function submitFun(e){checkExistAuto($("#username"),function(){postAction(e)})}function getbirthDate(){if("false"==localInfo.isRegNeedInputAge)return"";var e=$("#birthDate").datePickEMUI5("Y").toString(),o=$("#birthDate").datePickEMUI5("M").toString(),n=$("#birthDate").datePickEMUI5("D").toString();return 1==o.length&&(o="0"+o),1==n.length&&(n="0"+n),e+o+n}function postAction(n){var r=jQuery("#registerForm input[name='formBean.username']"),t=jQuery("#registerForm input[name='formBean.password']"),e=(jQuery("#registerForm input[name='formBean.randomCode']"),jQuery("#registerForm input[name='formBean.authCode']")),o=$("#countryRegion").val(),s="",a="";1<o.split("-").length&&(s=o.split("-")[1],a=o);var i=t.val(),d=localInfo.agreementContentsStr;localInfo.isSupportAdMarketAgr&&0==$("#adMarketChecked").is(":checked")&&(d=checkAdMarketAgreedAgrContent(d)),d=(d=d.replace(/\$countryCode/g,a)).replace(/\'/g,'"');var c={userAccount:r.val(),password:i,accountType:1,clientID:localInfo.clientID,authCode:e.val().trim(),reqClientType:localInfo.reqClientType,registerChannel:localInfo.loginChannel,languageCode:localInfo.lang,countryCode:s,agrVers:d,thirdLoginFlag:""!=localInfo.thirdLoginFlag&&localInfo.thirdLoginFlag,birthDate:getbirthDate(),session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};"1"==localInfo.displayCaptchaType?c.randomCode=ramdonCodeImgObj.getRandomCode():c.randomCode=$("#randomCode").val(),-1<(s=$("#countryCode").val()).indexOf("+")&&(s=s.replace("+","00"));var l=$("#secPhoneAcct").val();l&&(c.secAccountType=6,c.secAccount=getPhoneNumber(l,s),c.secVerifyCode=$("#secAuthCode").val()),c.operType=0,c.randomAuthCode=$("#randomCode").val();var u={10000201:rss_new.register_js_emailregfail,"default":rss_new.register_js_emailregfail};$("#btnSubmit").addClass("send-ajax"),casAjaxObj.registerCloudAccount(c,function(e){$("#btnSubmit").addClass("send-ajax"),$("#register_msg").show().html("");var o={userAccount:r.val(),password:t.val(),reqClientType:localInfo.reqClientType,loginChannel:localInfo.loginChannel,authcode:e.regToken,service:htmldecode(localInfo.service),loginUrl:localInfo.loginUrl,opType:"true"==localInfo.thirdLoginFlag?18:13};casAjaxObj.remoteLogin(o,function(e){$("#btnSubmit").addClass("send-ajax"),gotoUrl(e.callbackURL)},function(e,o){$("#btnSubmit").removeClass("send-ajax"),showErrorReg(e,o,n)},{},!1)},function(e,o){$("#btnSubmit").removeClass("send-ajax"),showErrorReg(e,o,n)},u)}function showErrorReg(e,o,n){chgRandomCodeForReset(),turnBtnToEnabled($("#getSecValiCode")),turnBtnToEnabled($("#getValiCode")),$("#authCode").removeClass("chkAuthCodeSuccess"),$("#authCode").val(""),$("#authCode").removeAttr("disabled"),$("#secAuthCode").removeAttr("disabled"),$("#secAuthCode").removeClass("chkAuthCodeSuccess"),$("#secAuthCode").val(""),$("#emailAuthCodeRight").removeClass("poptips-yes"),$("#secPhoneAuthCodeRight").removeClass("poptips-yes"),$("#authCodeRight").removeClass("poptips-yes"),$("#randomCode").val(""),$("#msg_randomCode").show().html(""),chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode),"10002073"==o.errorCode?window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),e)},100):"10000201"==o.errorCode?"1"==localInfo.displayCaptchaType&&captchaObj?(showCaptchaError(),ramdonCodeImgObj.resetRandomCode()):($("#randomCode").val(""),showRandomCodeError(e),$("#authCodeRight").removeClass("poptips-yes"),chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)):"70008001"==o.errorCode?window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),e)},100):"70002070"==o.errorCode?window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),e)},100):"10001013"==o.errorCode?(window.setTimeout(function(){showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),e)},100),turnBtnToEnabled($("#getSecValiCode")),$("#secAuthCode").attr("disabled",!1),$("#secAuthCode").removeClass("chkAuthCodeSuccess")):"70002002"==o.errorCode?window.setTimeout(function(){showErrorNew($("#errormsgemail-box"),$("#msg_email"),e)},100):"70002057"==o.errorCode?window.setTimeout(function(){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e)},100):"70002039"==o.errorCode?window.setTimeout(function(){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e)},100):"70006007"==o.errorCode?showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),e):showPopError(e),n.hide()}function checkExistAuto(e,n){var o=e.val();if(50<o.length||o.length<5)showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss_new.login_js_accountlength);else{var r={userAccount:o,accountType:1};casAjaxObj.isExsitUser(r,function t(e){var o=e.existAccountFlag;"0"==o?(hideErrorNew($("#errormsgemail-box"),$("#msg_email")),n&&n()):"1"==o?showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss_new.register_js_existemail):hideErrorNew($("#errormsgemail-box"),$("#msg_email"))},function s(e,o){o&&"10000004"==o.errorCode||showErrorNew($("#errormsgemail-box"),$("#msg_email"),e)})}}function changeInputCountryCode(e){var i,d=[];i=localInfo.currentCountryCode,e&&$.each(e,function(e,o){var n=o.split("("),r=getText(n[0]),t=o.split("|")[0],s=o.split("|")[1];if(r=r.replace("+","00"),s==i&&(localInfo.default_country_code=r,localInfo.default_country_cy=s),r){var a={value:r,cy:s,label:t};d.push(a)}}),$("#countryCode").val(localInfo.default_country_code),initPhoneListMaxWith($("#bindSecPhoneBox")),$("#input_languageCode").searchDropList({items:d,defaultValue:localInfo.default_country_code,defaultCy:localInfo.default_country_cy,onChange:function(e,o){hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"));var n=o.split("(");if(1<n.length){$("#countryCode").val(n[0]);var r=$("#secPhoneAcct").val();if(""!=r&&!valiMobile(r))return void showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error)}}})}function changeSecPhoneCode(e){var o=$(".optional");"true"==e?o.hide():(o.show(),-1!=o.css("left").indexOf("-")?o.css("left",-(o.width()+16)+"px"):o.css("right",-(o.width()+16)+"px"))}function afterSelectCountry(e){var o={lang:localInfo.lang,countryCode:e};casAjaxObj.isCountrySupportPhone(o,function(e){"1"==e.isSuccess&&(localInfo.mustBindPhone=e.mustBind,$("#secPhoneRandomCode-box").css("display","inherit"),$("#bindSecPhone-box").css("display","inherit"),changeSecPhoneCode(e.mustBind))});var n={lang:localInfo.lang,siteIDs:localInfo.siteIDs};casAjaxObj.getCountryCallingCode(n,function r(e){{if("1"!=e.isSuccess)return;changeInputCountryCode(e.countryCallingCodeList),displayCountry();var o=$("#secPhoneAcct").val();if(o&&!valiMobile(o))return void showErrorNew($("#bindSecPhoneBox"),$("#msg_sec_phone"),rss_new.common_js_error)}},function t(e,o){})}function getSecPhoneCode(e,o){var n=$("#username").val();if(n&&""!=n.trim()){if("1"==localInfo.displayCaptchaType){if(!ramdonCodeImgObj.isValidateRandomCodeSuccess())return showCaptchaError(),void ramdonCodeImgObj.resetRandomCode()}else{var r=$("#randomCode").val();if(!r||""==r.trim())return void showErrorNew($("#randomCodeDiv"),$("#randomCode_msg"),rss_new.picture_verfication_code_null_error)}var t=$("#authCode").val();if(t&&""!=t.trim()){var s=$("#secPhoneAcct").val();if(s&&""!=s.trim())if(valiMobile(s)){var a=$("#countryCode").val();-1<a.indexOf("+")&&(a=a.replace("+","00")),$("#msg_sec_phone").html(""),$("#register_msg").html(""),sendSecPhoneSMS(getPhoneNumber(s,a),e,o)}else showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error);else showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.uc_common_validator_phone_require)}else showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss_new.register_email_auth_placeholder)}else showErrorNew($("#errormsgemail-box"),$("#msg_email"),rss_new.uc_common_input_email_addr)}function chkAuthCode(e,o,n,r,t,s,a,i){var d={accountType:o,userAccount:e,authCode:n,authOprType:"3",siteID:localInfo.currentCountrySiteID,reqClientType:localInfo.reqClientType,operType:11};localInfo.isReadyToSubmit=!1,casAjaxObj.chkAuthCode(d,function c(){r.attr("disabled",!0),r.addClass("chkAuthCodeSuccess"),a.addClass("poptips-yes"),i.attr("disabled",!0),i.addClass("auth_code_grey"),localInfo.isReadyToSubmit&&$("#btnSubmit").click()},function l(e){$("#next").removeClass("send-ajax"),$("#inputAuthCode").addClass("input-error-EMUI5"),$("#msg_error_chkemail").addClass("addbtmpad-msg-top2p"),a.removeClass("poptips-yes"),showErrorNew(t,s,e)})}function showCaptchaError(){captchaObj.onSuccess(function(){$("#randomCodeDiv").css("margin-bottom","0")}),$("#randomCode_msg").addClass("error-tips-EMUI5"),$("#randomCodeDiv").removeClass("input-error-EMUI5").css("margin-bottom","24px"),$("#picAuthCode").removeClass("input-error-EMUI5"),$("#input-error-EMUI5").removeClass("input-error-EMUI5"),ramdonCodeImgObj.validateRandomCodeError()}function sendSecPhoneSMS(e,o,n,r){var t=$("#getSecValiCode"),s={userAccount:e,smsReqType:"3",reqClientType:o,accountType:2,siteID:localInfo.currentCountrySiteID,languageCode:localInfo.lang,operType:17,session_code_key:localInfo.session_code_key,randomCodeDisplayType:localInfo.randomCodeDisplayType};"1"==localInfo.displayCaptchaType?s.randomCode=ramdonCodeImgObj.getRandomCode():s.randomCode=$("#randomCode").val(),rss_new.msgDialogOverlayClass&&rss_new.msgDialogOverlayClass,t.attr("disabled",!0),casAjaxObj.getSMSAuthCode(s,function a(){var e=.5*(parseInt($("#msg_secphoneRandomCode").width())-280)+"px";hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode")),showMsgSuccess({obj:$("#msg_secphoneRandomCode"),msg:rss_new.uc_common_sms_has_sendto.format(getExpressPhone(s.userAccount)),leftPix:e,rightPix:"150px",bottom:"37px"}),$("#secAuthCode").removeAttr("disabled"),$("#secAuthCode").removeClass("chkAuthCodeSuccess"),$("#secAuthCode").val(""),$("#secPhoneAuthCodeRight").removeClass("poptips-yes"),t.attr("IntervalTime",60),t.attr("disabled",!0),t.addClass("auth_code_grey"),jsInnerTimeout($("#getSecValiCode"),rss_new.uc_common_resend,!0,!0)},function i(e,o){t.removeAttr("disabled",!0);var n=o.errorCode;"10000201"==n?"1"==localInfo.displayCaptchaType&&captchaObj?(showCaptchaError(),ramdonCodeImgObj.resetRandomCode()):(showRandomCodeError(e),chgRandomCodeForReset()):"10001012"==n?secPhoneAuthCodeOverLimit():"70009032"==n?showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),e):"10001011"==n?showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e):showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),e)})}$(document).ready(function(){var e,o,n,r,t;offChromeAutocomplete(),e=$("#tabPhone").width(),o=$("#tabMail").width(),n=o<e?e:o,$("#tabPhone").width(n+2+"px"),$("#tabMail").width(n+2+"px"),$(".reg-tab").css("visibility","visible"),localInfo.urlCountrySiteID==localInfo.currentSiteID&&(isCurrentSite=!0),r=$("#username"),t=r.val(),r.blur(function(){$(".seachDiv").css("display","none"),0<this.value.length&&t!=r.val()&&valiEmail(this.value)&&(t=r.val())}),function(){var a=$("#username"),i=$(".seachDiv"),e=$(".seachDiv ul li"),d=-1;a.keyup(function(){if(0<this.value.length&&-1<this.value.indexOf("@")){var t=this.value.split("@")[1],s=0;e.each(function(e){this.id="searchLi_"+e;var o=$("#"+this.id),n=o.attr("text");-1==n.indexOf(t)?(this.style.display="none",$(this).removeClass("showLi")):(s+=1,this.style.display="",$(this).addClass("showLi")),n=n.replace(t,"");var r=a.val()+n;this.innerHTML=r,o.mousedown(function(){var e=a.val().split("@")[0];a.val(e+"@"+o.attr("text")),i.css("display","none")})}),0<s&&(i.css("display","block"),$(this).addClass("showLi"))}}),$("#username").bind("keydown",function(e){var o=$(".seachDiv ul li.showLi"),n=$("#username"),r=$(".seachDiv"),t=$(".seachDiv ul li.current");switch(o.each(function(e){$(o[e]).css("background","#fff"),$(o[e]).removeClass("current")}),e.which){case 38:d--,c(o);break;case 40:d++,c(o);break;case 13:if(void 0===t.get(0)||"LI"!=t.get(0).tagName&&"li"!=t.get(0).tagName)$("#btnSubmit").click();else{var s=n.val().split("@")[0];n.val(s+"@"+t.attr("text")),r.css("display","none"),n.blur()}break;default:return}});var c=function(e){d<0&&(d=0),d>=e.length&&(d=e.length-1),$(e[d]).css("background","RGB(173,173,173)"),$(e[d]).addClass("current")}}(),$("#passwdEye").click(function(){"password"==document.getElementById("password").type?(document.getElementById("password").type="text",document.getElementById("confirmPwd").type="text",$(this).attr("src",XSSGuard4URL(localInfo.eyeon))):(document.getElementById("password").type="password",document.getElementById("confirmPwd").type="password",$(this).attr("src",XSSGuard4URL(localInfo.eyeoff)))}),getCountryRegion(),changeInputCountryCode(localInfo.countryCodes.split(",")),displayCountry();var s=$("#selectCountryImg").find("input").val().split("-")[1];getAgreementContent(s),"true"==$("#adDefaultAgreeOrNot").text()&&$("#adMarketChecked").prop("checked",!0),0<$("#birthDate").length&&showBirthDayDropBox(),initInputContent()}),$(function(){var o=jQuery("#registerForm input[name='formBean.username']"),e=jQuery("#registerForm input[name='formBean.password']"),n=jQuery("#registerForm input[name='checkPassword']"),r=jQuery("#registerForm input[name='formBean.authCode']"),t=jQuery("#registerForm input[name='formBean.randomCode']"),s=$("#registerForm input[name='formBean.secphone']"),a=$("#secAuthCode");$.label.defaults.ifRight="10px",$.label(o,rss_new.uc_common_input_email_addr).label(e,rss_new.uc_common_input_ling_pwd).label(n,rss_new.please_enter_password_again).label(r,rss_new.register_email_auth_placeholder).label(t,rss_new.picture_verfication_code_null_error),$.label($("#secPhoneAcct"),rss_new.uc_common_validator_phone_require),o.change(function(){var e=$("#authCode"),o=$("#secPhoneAcct"),n=$("#secAuthCode");$("#randomCode").val()!=undefined&&""!=$("#randomCode").val().trim()&&chgRandomCodeForReset(),$("#randomCode").val(""),e.removeAttr("disabled"),turnBtnToEnabled($("#getValiCode")),e.removeClass("chkAuthCodeSuccess"),e.val(""),o.val(""),n.val(""),n.removeAttr("disabled"),turnBtnToEnabled($("#getSecValiCode")),n.removeClass("chkAuthCodeSuccess"),$("#emailAuthCodeRight").removeClass("poptips-yes"),$("#secPhoneAuthCodeRight").removeClass("poptips-yes"),hideErrorNew($("#errormsgemail-box"),$("#msg_email")),hideErrorNew($("#pwdDiv"),$("#msg_password")),hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword")),hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode")),hideRandomCodeError(),$("#authCodeRight").removeClass("poptips-yes"),hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone")),hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))}),s.change(function(){var e=$("#secAuthCode");e.attr("disabled")&&"disabled"==e.attr("disabled")&&(e.removeAttr("disabled"),turnBtnToEnabled($("#getSecValiCode")),e.removeClass("chkAuthCodeSuccess")),e.val(""),$("#secPhoneAuthCodeRight").removeClass("poptips-yes"),hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))}),s.keyup(function(){hideErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"));var e=$("#secAuthCode");e.attr("disabled")&&"disabled"==e.attr("disabled")||(e.val(""),hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode")))}),a.keyup(function(){hideErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"))}),a.blur(function(){var e=$("#registerForm input[name='formBean.secphone']").val();if(!(o=$("#secAuthCode"))||0!=o.val().trim())if(1<=o.val().trim().length&&6!=o.val().trim().length||!/^\d+$/.test(o.val().trim()))showErrorNew($("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),rss_new.common_js_wrongcode);else if(o&&6==o.val().trim().length){var o=$("#registerForm input[name='formBean.secphoneauthCode']").val(),n=$("#countryCode").val();-1<n.indexOf("+")&&(n=n.replace("+","00"));var r=getPhoneNumber(e,n);""!=e&&chkAuthCode(r,2,o,$("#secAuthCode"),$("#secPhoneRandomCode-box"),$("#msg_secphoneRandomCode"),$("#secPhoneAuthCodeRight"),$("#getSecValiCode"))}}),s.blur(function(){if($("#secPhoneAcct")==undefined||$("#secPhoneAcct").val()==undefined||""!=$("#secPhoneAcct").val().trim()){var e=$("#countryCode").val();return-1<e.indexOf("+")&&(e=e.replace("+","00")),valiMobile(this.value,e)?void 0:(showErrorNew($("#bindSecPhone-box"),$("#msg_sec_phone"),rss_new.common_js_error),!1)}}),changeSecPhoneCode(localInfo.mustBindPhone),$.label(a,rss_new.forgetbyphone_inputsmscode);var i=$("#btnSubmit"),d={$email:$("#username"),showErrorFn:function(e){showErrorNew($("#errormsgemail-box"),$("#msg_email"),e)},successFn:function(){hideErrorNew($("#errormsgemail-box"),$("#msg_email"))},reInputFn:function(){hideErrorNew($("#errormsgemail-box"),$("#msg_email"))}};emailValidator(d),e.blur(function(){$("#pwd_check_dialog").html("")}),e.validator("bind",{type:["require","strLength","hasSpace","pwdComplexity","errorInput","pwdformat"],trim:!1,validOnChange:!0,min:8,max:32,msg_ct:"#msg_password",errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.common_js_inputpwd);break;case"strLength":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.reducePwd_format_2);break;case"hasSpace":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.reducePwd_format_1);break;case"pwdComplexity":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.reducePwd_format_3);break;case"errorInput":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.reducePwd_inputError_desc);break;case"pwdformat":showErrorNew($("#pwdDiv"),$("#msg_password"),rss_new.common_js_pwd_account_same_reverse)}},successFunction:function(){n.val()&&validator(n,!0)},reInputFunction:function(){hideErrorNew($("#pwdDiv"),$("#msg_password"))}}),n.validator("bind",{type:["require","eq"],trim:!1,validOnChange:!0,compareTo:e,msg_ct:"#msg_checkPassword",msg:{require:rss_new.reg_confirm_password,eq:rss_new.common_js_pwdnotsame},errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"),rss_new.reg_confirm_password);break;case"eq":showErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"),rss_new.common_js_pwdnotsame)}},successFunction:function(){hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"))},reInputFunction:function(){hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"))}}),r.validator("bind",{type:["require","length","int"],trim:!0,validOnChange:!0,max:6,min:6,msg_ct:"#msg_phoneRandomCode",msg:{require:rss_new.uc_common_sec_email_authcode_input,"int":rss_new.common_js_wrongcode,"default":rss_new.common_js_wrongcode},errorFunction:function(e,o){switch(o.type){case"require":showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss_new.uc_common_sec_email_authcode_input);break;case"int":default:showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss_new.common_js_wrongcode)}},successFunction:function(){},reInputFunction:function(){hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"))}}),r.blur(function(){if((e=r.val())&&(e=e.trim())&&6==e.length){var e;chkAuthCode(o.val(),1,e=r.val(),r,$("#errRandomCode-box"),$("#msg_phoneRandomCode"),$("#emailAuthCodeRight"),$("#getValiCode"))}}),o.focus(),i.bind("click",function(){localInfo.isReadyToSubmit=!0,checkInputLegality()&&registerAgreement(submitFun)}),e.bind("keyup",function(){onPwdKeyUp4EMUI(e[0],$("#msg_password"),$("#pwdDiv"),"error-tips-EMUI5","input-error-EMUI5",!0)}),"1"!=localInfo.displayCaptchaType&&(t.validator("bind",{type:["require","length"],trim:!0,min:4,max:4,validOnChange:!1,reInputEvent:"keyup",errorClassEMUI5:"input-error-EMUI5",errorBorder:$("#randomCodeDiv"),errorFunction:function(e,o){switch(o.type){case"require":showRandomCodeError(rss_new.picture_verfication_code_null_error);break;case"length":showRandomCodeError(rss_new.login_js_codeerror)}},successFunction:function(e,o){},reInputFunction:function(){hideRandomCodeError(),$("#authCodeRight").removeClass("poptips-yes")}}),$("#randomCode").bind("keyup",function(e){validateInput(),checkImgAuthCode()}),0<$("#randomCode").val().length&&chgRandomCodeForReset(),validateInput()),registerPwdformatValidator($("#username"))}),$(document).keyup(function(e){switch(e.which){case 13:$("#btnSubmit").click();break;default:return}});var secPhoneAuthCodeOverLimit=function(){var e="<div>"+rss_new.reg_sec_authcode_over_limit+"</div>";e+="<div id='crossSite_errDiv' style='margin-top:10px;font-size:12px;color:#ff3320'></div>",$("<div></div>").DialogSimple({text:e,btnText:rss_new.uc_common_igetit,dialogStyle:localInfo.msgDialogStyle,btnFn:function(){location.reload()},btnLeftText:"",btnLeftFn:function(){},html:e}).show()};$(function(){try{if(localInfo=window.localInfo||{},"undefined"==typeof localInfo.illnessOptype||"0"==localInfo.randomCodeDisplayType||"false"==localInfo.isUseCaptchaService&&5==localInfo.illnessOptype)return;var o=[1],n=[5,6,7,8,9];1==localInfo.illnessOptype?"1"==localInfo.displayCaptchaType?illnessOptype=1:illnessOptype=5:2==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?illnessOptype=2:illnessOptype=6:3==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?(illnessOptype=3,"1"==localInfo.sceneId&&(illnessOptype=4)):(illnessOptype=7,"1"==localInfo.sceneId&&(illnessOptype=8)):4==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?illnessOptype=4:illnessOptype=8:5==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?illnessOptype=15:illnessOptype=9:6==localInfo.illnessOptype?"2"==localInfo.randomCodeDisplayType?(illnessOptype=10,"true"==localInfo.isFromQuery&&(illnessOptype=11)):(illnessOptype=12,"true"==localInfo.isFromQuery&&(illnessOptype=13)):7==localInfo.illnessOptype&&("2"==localInfo.randomCodeDisplayType?illnessOptype=11:illnessOptype=13);var e={checkClass:"geetest_holder",count:0,canReSend:!0,operType:illnessOptype,isGeet:!0,init:function(){var e=this;return e.count=0,~o.indexOf(e.operType)&&(e.checkClass="geetest_panel"),~n.indexOf(e.operType)&&(e.checkClass="randomCodeImg",e.isGeet=!1),e.canReSend=!0,setTimeout(function(){$("#randomCodeImg").bind("error",function(){e.sendErrorLog(2)})},0),this},checkExit:function(){var e=this;return e.count<=60?(e.count++,0<$("."+e.checkClass).length||setTimeout(function(){e.checkExit()},500)):(e.sendErrorLog(1),e.init()),this},sendErrorLog:function(o){var n=this,e={reqClientType:localInfo.reqClientType,loginChannel:localInfo.loginChannel,operType:n.operType,message:"",illnessType:o};return casAjaxObj.analysisHealth(e,function(e){"10000033"==e.errorCode&&n.sendAgain(o)}),this},sendAgain:function(e){var o=this;return o.canReSend?(setTimeout(function(){o.sendErrorLog(e)},1e3),o.canReSend=!1):o.canReSend=!0,this}};e.init(),1!=localInfo.illnessOptype&&e.checkExit(),window.checkRamdomObj=e}catch(r){}});