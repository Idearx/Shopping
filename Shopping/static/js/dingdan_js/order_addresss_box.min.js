ec.pkg("ec.order");ec.order.getAddressBox=function(){var addrFtl=[];var gouldAddress=$("#gouldAddress").val();var isHide="";if(gouldAddress==1){isHide="hide"}var updateOrder=$("#updateOrder").val();addrFtl.push('<form id="myAddress-form" action="" autocomplete="off" method="post" onsubmit="return false;">');addrFtl.push('\t<input type="hidden" name="id" value="" /><input type="hidden" name="randomFlag" value="" />');addrFtl.push('\t<input type="hidden" name="province" value="">');addrFtl.push('\t<input type="hidden" name="city" value="">');addrFtl.push('\t<input type="hidden" name="district" value="">');addrFtl.push('\t<input type="hidden" name="street" value="">');addrFtl.push('\t<input type="hidden" name="provinceG" value="">');addrFtl.push('\t<input type="hidden" name="cityG" value="">');addrFtl.push('\t<input type="hidden" name="districtG" value="">');addrFtl.push('\t<input type="hidden" name="streetG" value="">');addrFtl.push('\t<input type="hidden" name="needL4Addr" id="needL4Addr" value="">');addrFtl.push('\t<input type="hidden" name="needL4AddrG" id="needL4AddrG" value="">');addrFtl.push('\t<div class="form-edit-panels">');addrFtl.push('\t\t<div class="form-edit-area">');addrFtl.push('\t\t\t<div class="form-edit-table form-edit-table-address">');addrFtl.push('\t\t\t\t<table cellspacing="0" cellpadding="0" border="0">');addrFtl.push("\t\t\t\t\t<tbody>");addrFtl.push("\t\t\t\t\t<tr>");addrFtl.push('\t\t\t\t\t\t<th><span class="required">*</span><label for="">收货人：</label></th>');addrFtl.push('\t\t\t\t\t\t<td><input type="text" class="text vam span-574" name="consignee" value=""><span class="vam" id="consignee-msg"></span></td>');addrFtl.push("\t\t\t\t\t</tr>");addrFtl.push("\t\t\t\t\t<tr>                                                                                                                                                                                                                                                                                                                                                                                                                   ");addrFtl.push('\t\t\t\t\t\t<th><span class="required">*</span><label for="">手机号码：</label></th>                                                                                                                                                                                                                                                                                                                                           ');addrFtl.push('\t\t\t\t\t\t<td><div class="vam inline-block"><input type="text" onblur="limitNum(event,this)" onchange="limitNum(event,this)" maxlength="20"  class="text  span-229 ime-disabled" name="mobile" value=""></div><label class="vam" for="" style="margin-left:2px;">&nbsp;备选号码：&nbsp;</label><div class="vam inline-block"><input type="text" name="phone" value="" class="text  span-229 ime-disabled"></div><div><span class="vam" id="phone-msg"></span></div></td>');addrFtl.push("\t\t\t\t\t</tr>                                                                                                                                                                                                                                                                                                                                                                                                                  ");addrFtl.push("\t\t\t\t\t<tr>");addrFtl.push('\t\t\t\t\t\t<th class="vat" rowspan="2"><span class="required">*</span><label for="">收货地址：</label></th>');addrFtl.push('\t\t\t\t\t\t<td class="relative">');addrFtl.push('\t\t\t\t\t\t\t\x3c!--以下内容隐藏时添加class="hide"，显示去掉class="hide"--\x3e');addrFtl.push('\t\t\t\t\t\t\t<div class="form-address">');addrFtl.push('\t\t\t\t\t\t\t    <div id="current-address" class="form-address-detail">选择省-市-区-街道</div>\x3c!--有内容时添加class="form-address-detailcon"--\x3e');addrFtl.push("\t\t\t\t\t\t\t</div>");addrFtl.push('\t\t\t\t\t\t\t<div id="address-tab" class="form-address selected hide">');addrFtl.push('\t\t\t\t\t\t\t    <a href="javascript:;" class="btn-address-close">关闭</a>');addrFtl.push('\t\t\t\t\t\t\t    <div id="form-address-choose-normal" class="form-address-choose">');addrFtl.push('\t\t\t\t\t\t\t        <div class="form-address-name">');addrFtl.push('\t\t\t\t\t\t\t            <div id="provice_info" class="form-address-name-tab clearfix">\x3c!--已选择内容时添加class="current"--\x3e');addrFtl.push('\t\t\t\t\t\t\t            \t<a id="provice" level-value="1" data-value="">请选择</a>');addrFtl.push('\t\t\t\t\t\t\t            \t<a id="city" level-value="2" data-value="">请选择</a>                                                                                                                                                                                                                                                                                                                                          ');addrFtl.push('\t\t\t\t\t\t\t            \t<a id="district" level-value="3" data-value="">请选择</a>                                                                                                                                                                                                                                                                                                                                      ');addrFtl.push('\t\t\t\t\t\t\t            \t<a id="street" level-value="4" class="hide" data-value="">请选择</a>                                                                                                                                                                                                                                                                                                                           ');addrFtl.push("\t\t\t\t\t\t\t            </div>                                                                                                                                                                                                                                                                                                                                                                                             ");addrFtl.push('\t\t\t\t\t\t\t            <div id="address_table" class="form-address-name-con">                                                                                                                                                                                                                                                                                                                                             ');addrFtl.push("\t\t\t\t\t\t\t            </div>                                                                                                                                                                                                                                                                                                                                                                                             ");addrFtl.push("\t\t\t\t\t\t\t        </div>                                                                                                                                                                                                                                                                                                                                                                                                 ");if(gouldAddress==1){addrFtl.push('\t\t\t\t\t\t\t        <div class="link-address"><a href="javascript:ec.address.change(1)">搜索地址快速定位></a></div>                                                                                                                                                                                                                                                                                                       ')}else{addrFtl.push('\t\t\t\t\t\t\t        <div class="link-address"></div>                                                                                                                                                                                                                                                                                                       ')}addrFtl.push("\t\t\t\t\t\t\t    </div>                                                                                                                                                                                                                                                                                                                                                                                                     ");addrFtl.push("\t\t\t\t\t\t\t</div>                                                                                                                                                                                                                                                                                                                                                                                                         ");if(gouldAddress==1){addrFtl.push('\t\t\t\t\t\t\t<div id="address-search" class="form-address selected hide">                                                                                                                                                                                                                                                                                                                                                   ');addrFtl.push('\t\t\t\t\t\t\t    <a href="javascript:;" class="btn-address-close">关闭</a>                                                                                                                                                                                                                                                                                                                                                  ');addrFtl.push('\t\t\t\t\t\t\t    <div id="form-address-choose-search" class="form-address-choose">                                                                                                                                                                                                                                                                                                                                          ');addrFtl.push('\t\t\t\t\t\t\t        <div class="form-address-search">                                                                                                                                                                                                                                                                                                                                                                      ');addrFtl.push('\t\t\t\t\t\t\t            <div class="form-address-search-text"><a href="javascript:;">清除</a>                                                                                                                                                                                                                                                                                                                              ');addrFtl.push('\t\t\t\t\t\t\t            \t<input type="text" placeholder="输入街道、乡镇、小区或商圈名称">                                                                                                                                                                                                                                                                                                                                                                            ');addrFtl.push("\t\t\t\t\t\t\t            </div>                                                                                                                                                                                                                                                                                                                                                                                             ");addrFtl.push('\t\t\t\t\t\t\t            <p class="form-address-example">例如：<span>深圳 天安云谷</span></p>                                                                                                                                                                                                                                                                                                                              ');addrFtl.push('\t\t\t\t\t\t\t            <div class="form-address-search-list">                                                                                                                                                                                                                                                                                                                                                             ');addrFtl.push('\t\t\t\t\t\t\t                <div id="form-address-no" class="form-address-no hide">没有找到这个地方，试试通过城市名+地点名来搜索<br>例如：<span>深圳 天安云谷</span></div>                                                                                                                                                                                                                                                   ');addrFtl.push("\t\t\t\t\t\t\t                <ul>                                                                                                                                                                                                                                                                                                                                                                                           ");addrFtl.push("\t\t\t\t\t\t\t                </ul>                                                                                                                                                                                                                                                                                                                                                                                          ");addrFtl.push("\t\t\t\t\t\t\t            </div>                                                                                                                                                                                                                                                                                                                                                                                             ");addrFtl.push("\t\t\t\t\t\t\t        </div>                                                                                                                                                                                                                                                                                                                                                                                                 ");addrFtl.push('\t\t\t\t\t\t\t        <div class="link-address"><a href="javascript:ec.address.change(2)">直接选择地址></a></div>                                                                                                                                                                                                                                                                                                            ');addrFtl.push("\t\t\t\t\t\t\t    </div>                                                                                                                                                                                                                                                                                                                                                                                                     ");addrFtl.push("\t\t\t\t\t\t\t</div>                                                                                                                                                                                                                                                                                                                                                                                                         ")}addrFtl.push('\t\t\t\t\t\t\t\x3c!-- <div id="myAddress-region" class="inline-block"></div> --\x3e                                                                                                                                                                                                                                                                                                                                                ');addrFtl.push('\t\t\t\t\t\t\t<label id="myAddress-msg"></label>                                                                                                                                                                                                                                                                                                                                                                             ');addrFtl.push("\t\t\t\t\t\t</td>                                                                                                                                                                                                                                                                                                                                                                                                              ");addrFtl.push("\t\t\t\t\t</tr>                                                                                                                                                                                                                                                                                                                                                                                                                  ");addrFtl.push('\t\t\t\t\t<tr class="tr-rel">                                                                                                                                                                                                                                                                                                                                                                                                                   ');addrFtl.push('\t\t\t\t\t\t<td><textarea name="address" class="textarea span-574"></textarea><span class="vat" id="address-msg"></span></td>                                                                                                                                                                                                                                                                                                  ');addrFtl.push("\t\t\t\t\t</tr>                                                                                                                                                                                                                                                                                                                                                                                                                  ");addrFtl.push("\t\t\t\t\t</tr>                                                                                                                                                                                                                                                                                                                                                                                                                  ");addrFtl.push("\t\t\t\t\t</tbody>                                                                                                                                                                                                                                                                                                                                                                                                               ");addrFtl.push("\t\t\t\t</table>                                                                                                                                                                                                                                                                                                                                                                                                                   ");addrFtl.push("\t\t\t</div>                                                                                                                                                                                                                                                                                                                                                                                                                         ");addrFtl.push("\t\t</div>                                                                                                                                                                                                                                                                                                                                                                                                                             ");addrFtl.push("\t</div>                                                                                                                                                                                                                                                                                                                                                                                                                                 ");addrFtl.push('\t<div class="box-button">                                                                                                                                                                                                                                                                                                                                                                                                               ');addrFtl.push('\t\t<a class="box-cancel" href="javascript:;" ');if(updateOrder==0){addrFtl.push('onclick="ec.order.myAddress.cancel()">')}else{addrFtl.push('onclick="ec.member.orderEdit.myAddress.cancel()">')}addrFtl.push('<span>取消</span></a><a class="box-ok" href="javascript:;" ');if(updateOrder==0){addrFtl.push('onclick="ec.order.myAddress.save(this)">')}else{addrFtl.push('onclick="ec.member.orderEdit.myAddress.save(this)">')}addrFtl.push("<span>保存并使用</span></a>                                                                                                                                                                                                                     ");addrFtl.push("\t</div>                                                                                                                                                                                                                                                                                                                                                                                                                                 ");addrFtl.push('\t<div class="box-form-tips"><span class=""></span></div>                                                                                                                                                                                                                                                                                                                                                                                ');addrFtl.push("</form>");return addrFtl.join("")};ec.order.invalidProductBox=function(productList){var invalidProduct=[];invalidProduct.push('<div class="box-errors"><span>以下商品暂不可购买</span></div>');invalidProduct.push('<div class="order-no-list" id="order-no-list">');for(var i=0;i<productList.length;i++){invalidProduct.push('<ul class="clearfix">');if(productList[i].itemType=="G"){invalidProduct.push("<li>配</li>")}else if(productList[i].itemType=="S1"||productList[i].itemType=="S6"||productList[i].itemType=="S15"){invalidProduct.push("<li>服务</li>")}else if(productList[i].itemType=="P"){invalidProduct.push("<li>套餐</li>")}else if(productList[i].itemType=="J"){invalidProduct.push("<li>加价购</li>")}else if(productList[i].itemType=="DP"&&productList[i].deleteType!="main"){invalidProduct.push("<li>搭配</li>")}else{invalidProduct.push("<li></li>")}invalidProduct.push('<li class="p-img">');invalidProduct.push('<img alt="" src="'+ec.autoEncodeAttr(ec.mediaPath+productList[i].picturePath)+'"/>');invalidProduct.push("</li>");invalidProduct.push("<li>");invalidProduct.push('<div class="p-name">'+ec.autoEncodeAttr(productList[i].productName)+"</div>");invalidProduct.push("</li>");invalidProduct.push("<li>x"+productList[i].qty+"</li>");if(productList[i].deleteType=="G"){invalidProduct.push('<input type="hidden" name="sbomCode'+i+'" itemtype="'+productList[i].mainItemType+'" data-mainCode="'+ec.autoEncodeAttr(productList[i].mainSbomCode)+'" value="'+ec.autoEncodeAttr(productList[i].itemId)+'"/>')}else if(productList[i].deleteType=="main"){invalidProduct.push('<input type="hidden" name="main'+i+'" itemtype="'+productList[i].itemType+'" value="'+productList[i].itemId+'"/>')}else if(productList[i].deleteType=="subType"){invalidProduct.push('<input type="hidden" name="sub'+i+'" itemtype="'+productList[i].itemType+'" data-mainCode="'+ec.autoEncodeAttr(productList[i].mainSbomCode)+'" value="'+productList[i].itemId+'"/>')}invalidProduct.push("</ul>")}invalidProduct.push("</div>");invalidProduct.push('<div class="box-button">');invalidProduct.push('<a href="javascript:;" class="box-cancel" onclick="ec.order.goBack();"><span>取消</span></a>');invalidProduct.push('<a href="javascript:;" class="box-sure" onclick="ec.order.removeProduct();"><span>移除并结算</span></a>');invalidProduct.push("</div>");return invalidProduct.join("")};